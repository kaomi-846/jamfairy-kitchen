<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>JamFairy's Kitchen</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 0;
      line-height: 1.6;
    }
    img {
      max-width: 100%;
      height: auto;
      display: block;
      margin: 0 auto;
    }
    header, footer {
      text-align: center;
      padding: 1em;
      background: #fff5f8;
    }
    main {
      max-width: 900px;
      margin: auto;
      padding: 1em;
    }
    footer {
      font-size: 0.9em;
      color: #666;
    }
  </style>
</head>

<!--
Copyright (c) 2025 è¾²ç”£å·¥æˆ¿ã‚„ã—ã‚
æœ¬ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã¯å€‹äººåˆ©ç”¨ã«é™ã‚Šç„¡æ–™ã§ä½¿ç”¨ã§ãã¾ã™ã€‚
å•†ç”¨åˆ©ç”¨ã€è²©å£²ã€å†é…å¸ƒã¯ç¦æ­¢ã•ã‚Œã¦ã„ã¾ã™ã€‚
è©³ã—ãã¯ LICENSE ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã”è¦§ãã ã•ã„ã€‚
-->

<body>

<header>
  <h1>ğŸ“ JamFairy's Kitchen</h1>
  <p>ã‚ˆã†ã“ã <strong>JamFairy's Kitchen</strong> ã¸ï¼<br>
  ã‚¸ãƒ£ãƒ ä½œã‚Šã‚’ã‚‚ã£ã¨æ¥½ã—ãã€ã‚‚ã£ã¨ä¾¿åˆ©ã«ã™ã‚‹ã€ãƒ¬ã‚·ãƒ”è¨ˆç®—ã‚¢ãƒ—ãƒªã§ã™ã€‚</p>
</header>

<section>
  <h2>ğŸŒ¸ Welcome</h2>
  <img src="jamapp_welcome.png" alt="Welcome Image" class="responsive">
</section>

<section>
  <h2>âœ¨ ã‚¢ãƒ—ãƒªã®ç‰¹å¾´</h2>
  <ul>
    <li>ğŸ“‹ ææ–™ã‚’å…¥ã‚Œã‚‹ã ã‘ã§å¿…è¦ãªç ‚ç³–é‡ã‚’è‡ªå‹•è¨ˆç®—</li>
    <li>ğŸ–¨ï¸ ä¸€æ‹¬è¡¨ç¤ºãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆå¯èƒ½</li>
    <li>ğŸŒ Webãƒ–ãƒ©ã‚¦ã‚¶ã§å‹•ä½œï¼ˆã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸è¦ï¼‰</li>
  </ul>
</section>

<section>
  <h2>ğŸš€ å§‹ã‚ã¦ã¿ã¾ã—ã‚‡ã†</h2>
  <img src="jamapp_enter.png" alt="Enter Screen" class="responsive">
</section>

<section class="recipe-container">

 <!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ã‚¸ãƒ£ãƒ ãƒ¬ã‚·ãƒ”ã‚¢ãƒ—ãƒª</title>
    <style>
      body {
        font-family: "Hiragino Kaku Gothic ProN", sans-serif;
        background-color: #fff0f5;
        color: #333;
        padding: 20px;
      }
      label {
        display: block;
        margin-top: 10px;
        font-weight: bold;
      }
      input,
      select,
      button {
        width: 100%;
        max-width: 400px;
        padding: 8px;
        margin-bottom: 10px;
        font-size: 1em;
      }
      .result {
        background-color: #fff;
        border: 1px solid #ccc;
        padding: 10px;
        margin-top: 20px;
        white-space: pre-wrap;
      }
      button {
        background-color: #d63384;
        color: #fff;
        border: none;
        cursor: pointer;
      }
      button:hover {
        background-color: #ff85c1;
      }
      .white-box {
        background-color: #fff;
        padding: 15px;
        margin-top: 20px;
        border: 2px solid #d63384;
      }
      .section-title {
        font-weight: bold;
        color: #d63384;
        margin-bottom: 10px;
        font-size: 1.2em;
      }
      @media print {
        body * {
          display: none;
        }
        .print-area {
          display: block !important;
        }
      }
    </style>
  </head>
  <body>
    <h2>ğŸ“ ã‚¸ãƒ£ãƒ ãƒ¬ã‚·ãƒ”ã‚¢ãƒ—ãƒª</h2>
    <p style="font-size: 0.9em; color: #555">
      åŸææ–™ã¨å¸Œæœ›ç³–åº¦ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€å¿…è¦ãªç ‚ç³–é‡ã‚„ãƒ¬ã‚·ãƒ”ãŒè‡ªå‹•ã§ç®—å‡ºã•ã‚Œã€ä¸€æ‹¬è¡¨ç¤ºã‚‚ä½œæˆã§ãã¾ã™ã€‚<br />
      â€»pHå€¤ã‚‚ç›®å®‰ã¨ã—ã¦è¡¨ç¤ºã—ã¾ã™ã€‚
    </p>

    <label>ä¸»åŸææ–™:</label>
    <input
      type="text"
      id="mainIngredient"
      onkeydown="handleEnter(event, 'mainWeight')"
    />

    <label>ä¸»åŸææ–™ã®é‡é‡ï¼ˆgï¼‰:</label>
    <input
      type="number"
      id="mainWeight"
      onkeydown="handleEnter(event, 'subIngredient1')"
    />

    <label>å‰¯åŸææ–™1:</label>
    <input
      type="text"
      id="subIngredient1"
      onkeydown="handleEnter(event, 'subWeight1')"
    />

    <label>å‰¯åŸææ–™1ã®é‡é‡ï¼ˆgï¼‰:</label>
    <input
      type="number"
      id="subWeight1"
      onkeydown="handleEnter(event, 'subIngredient2')"
    />

    <label>å‰¯åŸææ–™2:</label>
    <input
      type="text"
      id="subIngredient2"
      onkeydown="handleEnter(event, 'butterType')"
    />
    <label>åŸææ–™ã«ãƒã‚¿ãƒ¼ã‚’ä½¿ã£ãŸå ´åˆï¼šç¨®é¡ã‚’é¸æŠã—ã¦ãã ã•ã„</label>
    <select id="butterType" onkeydown="handleEnter(event, 'subWeight2')">
      <option value="">ï¼ˆãƒã‚¿ãƒ¼ã‚’ä½¿ã†å ´åˆã¯é¸æŠã—ã¦ãã ã•ã„ï¼‰</option>
      <option value="æœ‰å¡©">æœ‰å¡©</option>
      <option value="ç„¡å¡©">ç„¡å¡©</option>
    </select>

    <label>å‰¯åŸææ–™2ã®é‡é‡ï¼ˆgï¼‰:</label>
    <input
      type="number"
      id="subWeight2"
      onkeydown="handleEnter(event, 'mainSweetener')"
    />

    <label>ãƒ¡ã‚¤ãƒ³ç”˜å‘³æ–™:</label>
    <input
      type="text"
      id="mainSweetener"
      placeholder="ä¾‹ï¼šã‚°ãƒ©ãƒ‹ãƒ¥ãƒ¼ç³–"
      onkeydown="handleEnter(event, 'otherSweetener')"
    />

    <label>ãã®ä»–ã®ç”˜å‘³æ–™:</label>
    <input
      type="text"
      id="otherSweetener"
      placeholder="ä¾‹ï¼šã¯ã¡ã¿ã¤"
      onkeydown="handleEnter(event, 'otherSweetenerWeight')"
    />

    <label>ãã®ä»–ã®ç”˜å‘³æ–™ã®é‡é‡ï¼ˆgï¼‰:</label>
    <input
      type="number"
      id="otherSweetenerWeight"
      onkeydown="handleEnter(event, 'spice')"
    />

    <label>ã‚¹ãƒ‘ã‚¤ã‚¹:</label>
    <select id="spice" onkeydown="handleEnter(event, 'spiceLevel')">
      <option value="">ä½¿ç”¨ã—ãªã„</option>
      <option value="ã‚·ãƒŠãƒ¢ãƒ³">ã‚·ãƒŠãƒ¢ãƒ³</option>
      <option value="ã‚¯ãƒ­ãƒ¼ãƒ–">ã‚¯ãƒ­ãƒ¼ãƒ–</option>
      <option value="ã‚¸ãƒ³ã‚¸ãƒ£ãƒ¼ãƒ‘ã‚¦ãƒ€ãƒ¼">ã‚¸ãƒ³ã‚¸ãƒ£ãƒ¼ãƒ‘ã‚¦ãƒ€ãƒ¼</option>
      <option value="ãƒ–ãƒ©ãƒƒã‚¯ãƒšãƒƒãƒ‘ãƒ¼">ãƒ–ãƒ©ãƒƒã‚¯ãƒšãƒƒãƒ‘ãƒ¼</option>
      <option value="å”è¾›å­">å”è¾›å­</option>
      <option value="æŠ¹èŒ¶">æŠ¹èŒ¶</option>
      <option value="ç´…èŒ¶è‘‰">ç´…èŒ¶è‘‰</option>
    </select>

    <label>ã‚¹ãƒ‘ã‚¤ã‚¹ã®å¼·ã•:</label>
    <select id="spiceLevel" onkeydown="handleEnter(event, 'pectin')">
      <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
      <option value="ã»ã‚“ã®ã‚Š">ã»ã‚“ã®ã‚Š</option>
      <option value="æ™®é€š">æ™®é€š</option>
      <option value="ã—ã£ã‹ã‚Š">ã—ã£ã‹ã‚Š</option>
    </select>

    <label>ãƒšã‚¯ãƒãƒ³ï¼ˆgï¼‰:</label>
    <input
      type="number"
      id="pectin"
      onkeydown="handleEnter(event, 'flavoring')"
    />

    <label>é¦™æ–™:</label>
    <input
      type="text"
      id="flavoring"
      onkeydown="handleEnter(event, 'acidulant')"
    />

    <label>é…¸å‘³æ–™ï¼ˆä¾‹ï¼šãƒ¬ãƒ¢ãƒ³æœæ±, ã‚¯ã‚¨ãƒ³é…¸ï¼‰:</label>
    <input
      type="text"
      id="acidulant"
      placeholder="ä¾‹ï¼šãƒ¬ãƒ¢ãƒ³æœæ±"
      onkeydown="handleEnter(event, 'acidulantWeight')"
    />

    <label>é…¸å‘³æ–™ã®é‡é‡(g):</label>
    <input
      type="number"
      id="acidulantWeight"
      placeholder="ä¾‹ï¼š0.5"
      onkeydown="handleEnter(event, 'liquor')"
    />

    <label>æ´‹é…’:</label>
    <input
      type="text"
      id="liquor"
      placeholder="ä¾‹ï¼šãƒ©ãƒ é…’"
      onkeydown="handleEnter(event, 'liquorWeight')"
    />

    <label>æ´‹é…’ã®é‡é‡ï¼ˆgï¼‰:</label>
    <input
      type="number"
      id="liquorWeight"
      onkeydown="handleEnter(event, 'jamType')"
    />

    <label>ã‚¸ãƒ£ãƒ ã‚¿ã‚¤ãƒ—:</label>
    <select id="jamType" onkeydown="handleEnter(event, 'targetBrix')">
      <option value="é«˜ç³–åº¦ï¼ˆ65%ä»¥ä¸Šã€å¸¸æ¸©ä¿å­˜å¯ï¼‰">
        é«˜ç³–åº¦ï¼ˆ65%ä»¥ä¸Šã€ç“¶ã”ã¨ç…®æ²¸æ®ºèŒã€å¸¸æ¸©ä¿å­˜å¯ï¼‰
      </option>
      <option value="ä½ç³–åº¦ï¼ˆè¦å†·è”µï¼‰">
        ä½ç³–åº¦ï¼ˆç´ æã®å‘³ã‚’æ´»ã‹ã—ãŸæ§ãˆã‚ãªç”˜ã•ã€‚55ï¼…ç›®å®‰ã€è¦å†·è”µï¼‰
      </option>
      <option value="ã‚³ãƒ³ãƒ•ã‚£ãƒãƒ¥ãƒ¼ãƒ«ï¼ˆè¦å†·è”µï¼‰">
        ã‚³ãƒ³ãƒ•ã‚£ãƒãƒ¥ãƒ¼ãƒ«ï¼ˆæœå®Ÿæ„Ÿã‚’æ®‹ã—ã¤ã¤ã€è‡ªç„¶ãªç”˜ã•ã§é£Ÿã¹ã‚„ã™ã„ã€‚45ï¼…ç›®å®‰ã€è¦å†·è”µï¼‰
      </option>
      <option value="ã‚½ãƒ¼ã‚¹ï¼ˆè¦å†·è”µï¼‰">
        ã‚½ãƒ¼ã‚¹ï¼ˆã‹ã‘ã‚‹ã‚¿ã‚¤ãƒ—ã§ãƒ•ãƒ«ãƒ¼ãƒ†ã‚£ãªé¢¨å‘³ã‚’æ¥½ã—ã‚ã‚‹ã€‚30ï¼…ç›®å®‰ã€‚è¦å†·è”µï¼‰
      </option>
    </select>

    <label>ç³–åº¦ã®ç›®å®‰ï¼ˆ%ï¼‰ã‚¸ãƒ£ãƒ ã‚¿ã‚¤ãƒ—ã‚’å‚è€ƒã«å…¥åŠ›:</label>
    <input
      type="number"
      id="targetBrix"
      value="65"
      onkeydown="handleEnter(event, 'emptyPot')"
    />

    <button id="generateButton" onclick="generateRecipe()">ãƒ¬ã‚·ãƒ”ã‚’è¡¨ç¤º</button>
    <div class="result print-area" id="recipeOutput"></div>
    <button onclick="printRecipeOnly()">ğŸ–¨ï¸ ãƒ¬ã‚·ãƒ”ã‚’å°åˆ·ã™ã‚‹</button>

    <!-- ä¸€æ‹¬è¡¨ç¤ºç”¨å…¥åŠ›æ  -->
    <div class="white-box">
      <div class="section-title">ğŸ‹ ä¸€æ‹¬è¡¨ç¤ºç”¨ã®è¿½åŠ æƒ…å ±</div>
      <label>ä¸»åŸææ–™ã®åŸç”£åœ°:</label>
      <input
        type="text"
        id="origin"
        onkeydown="handleEnter(event, 'emptyPot')"
      />

      <label>ç©ºé‹ã®é‡é‡ï¼ˆgï¼‰:</label>
      <input
        type="number"
        id="emptyPot"
        onkeydown="handleEnter(event, 'totalWithPot')"
      />

      <label>ç…®è©°ã‚å¾Œã®é‹ï¼‹ã‚¸ãƒ£ãƒ ã®é‡é‡ï¼ˆgï¼‰:</label>
      <input
        type="number"
        id="totalWithPot"
        onkeydown="handleEnter(event, 'displayAmount')"
      />

      <label>è¡¨ç¤ºã—ãŸã„å†…å®¹é‡ï¼ˆgï¼‰:</label>
      <input
        type="number"
        id="displayAmount"
        onkeydown="handleEnter(event, 'generateLabelButton')"
      />
    </div>

    <button id="generateLabelButton" onclick="generateLabel()">
      ä¸€æ‹¬è¡¨ç¤ºã‚’ä½œæˆã™ã‚‹
    </button>
    <div class="result print-area" id="labelOutput"></div>
    <button onclick="printLabelOnly()">ğŸ–¨ï¸ ä¸€æ‹¬è¡¨ç¤ºã‚’å°åˆ·ã™ã‚‹</button>

    <button onclick="toggleGuide()">
      ä¸‹ã”ã—ã‚‰ãˆãƒ»èª¿ç†ã®ãƒ’ãƒ³ãƒˆã‚’è¦‹ã‚‹ã€ãŸãŸã‚€
    </button>

    <div class="result print-area" id="guide" style="display: none"></div>

    <footer style="margin-top: 30px; color: #5a4033; font-size: 0.95em">
      ğŸ“ã“ã®ã‚¢ãƒ—ãƒªã¯ã€ã”å®¶åº­ã§ã®æ‰‹ä½œã‚Šã‚¸ãƒ£ãƒ ã‚„ã€è²©å£²ã‚’ç›®æŒ‡ã™æ–¹ã®è©¦ä½œã®ç›®å®‰ã¨ã—ã¦ã”åˆ©ç”¨ã„ãŸã ãã‚‚ã®ã§ã™ã€‚<br />
      ğŸ“å®Ÿéš›ã«è²©å£²ã™ã‚‹éš›ã«ã¯ã€è£½é€ è¨±å¯ã‚’å—ã‘ãŸæ–½è¨­ã§ä½œæ¥­ã‚’è¡Œã„ã€å¿…è¦ãªåŠ ç†±æ®ºèŒã‚„è¡›ç”Ÿç®¡ç†ã‚’è¡Œã£ã¦ãã ã•ã„ã€‚<br />
      ğŸ“ã¾ãŸã€è²©å£²å‰ã«ã¯å¿…ãšä¿å¥æ‰€ã‚„æ¤œæŸ»æ©Ÿé–¢ã«ç›¸è«‡ã—ã€æ³•å¾‹ã«æ²¿ã£ãŸè¡¨ç¤ºã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚<br />
      ğŸ“æœ¬ã‚¢ãƒ—ãƒªã§ä½œæˆã™ã‚‹å†…å®¹ã¯ã‚ãã¾ã§ç›®å®‰ã§ã‚ã‚Šã€ã”åˆ©ç”¨ã¯ã™ã¹ã¦è‡ªå·±è²¬ä»»ã§ãŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚<br /><br />
      Printed from ã‚¸ãƒ£ãƒ ãƒ¬ã‚·ãƒ”ã‚¢ãƒ—ãƒª | Produced by è¾²ç”£å·¥æˆ¿ã‚„ã—ã‚
    </footer>

    <script>
      let globalMainSweetenerWeight = 0;
      let globalJamWeight = 0;
      const allergens = [
        "ãˆã³",
        "ã‹ã«",
        "ãã‚‹ã¿",
        "å°éº¦",
        "ãã°",
        "åµ",
        "ä¹³",
        "è½èŠ±ç”Ÿ",
        "ã‚¢ãƒ¼ãƒ¢ãƒ³ãƒ‰",
        "ã‚ã‚ã³",
        "ã„ã‹",
        "ã„ãã‚‰",
        "ã‚ªãƒ¬ãƒ³ã‚¸",
        "ã‚«ã‚·ãƒ¥ãƒ¼ãƒŠãƒƒãƒ„",
        "ã‚­ã‚¦ã‚¤ãƒ•ãƒ«ãƒ¼ãƒ„",
        "ç‰›è‚‰",
        "ã”ã¾",
        "ã•ã‘",
        "ã•ã°",
        "å¤§è±†",
        "é¶è‚‰",
        "ãƒãƒŠãƒŠ",
        "è±šè‚‰",
        "ãƒã‚«ãƒ€ãƒŸã‚¢ãƒŠãƒƒãƒ„",
        "ã‚‚ã‚‚",
        "ã‚„ã¾ã„ã‚‚",
        "ã‚Šã‚“ã”",
        "ã‚¼ãƒ©ãƒãƒ³",
      ];

      //<script>
      const ingredientData = {
        ãƒ¬ãƒ¼ã‚ºãƒ³: {
          kcal: 300,
          protein: 2.5,
          fat: 0.4,
          carb: 79,
          salt: 0,
          ph: 3.8,
        },
        æœ‰å¡©ãƒã‚¿ãƒ¼: {
          kcal: 717,
          protein: 0.9,
          fat: 81,
          carb: 0.1,
          salt: 1.5,
          ph: 6.0,
        },
        ç„¡å¡©ãƒã‚¿ãƒ¼: {
          kcal: 717,
          protein: 0.9,
          fat: 81,
          carb: 0.1,
          salt: 0,
          ph: 6.0,
        },
        ã¯ã¡ã¿ã¤: {
          kcal: 294,
          protein: 0.3,
          fat: 0,
          carb: 79.7,
          salt: 0,
          ph: 3.9,
        },
        ã‚°ãƒ©ãƒ‹ãƒ¥ãƒ¼ç³–: {
          kcal: 387,
          protein: 0,
          fat: 0,
          carb: 99.8,
          salt: 0,
          ph: null,
        },
        ã„ã¡ã”: {
          kcal: 34,
          protein: 0.9,
          fat: 0.1,
          carb: 7.9,
          salt: 0,
          ph: 3.3,
          sugarPct: 8,
        },
        ã‚Šã‚“ã”: {
          kcal: 54,
          protein: 0.2,
          fat: 0.3,
          carb: 14.1,
          salt: 0,
          ph: 3.6,
          sugarPct: 12,
        },
        ã™ã‚‚ã‚‚: {
          kcal: 46,
          protein: 0.6,
          fat: 0.2,
          carb: 10.5,
          salt: 0,
          ph: 3.2,
          sugarPct: 10,
        },
        ã‚‚ã‚‚: {
          kcal: 40,
          protein: 0.6,
          fat: 0.1,
          carb: 9.5,
          salt: 0,
          ph: 3.8,
          sugarPct: 9,
        },
        ã‚­ã‚¦ã‚¤ãƒ•ãƒ«ãƒ¼ãƒ„: {
          kcal: 51,
          protein: 1.0,
          fat: 0.1,
          carb: 13.5,
          salt: 0,
          ph: 3.4,
          sugarPct: 9,
        },
        ã„ã¡ã˜ã: {
          kcal: 54,
          protein: 0.5,
          fat: 0.2,
          carb: 16,
          salt: 0,
          ph: 4.6,
          sugarPct: 16,
        },
        å¤ã¿ã‹ã‚“: {
          kcal: 40,
          protein: 0.7,
          fat: 0.2,
          carb: 9,
          salt: 0,
          ph: 3.2,
          sugarPct: 9,
        },
        æ–‡æ—¦: {
          kcal: 42,
          protein: 0.8,
          fat: 0.2,
          carb: 8.7,
          salt: 0,
          ph: 3.4,
          sugarPct: 8,
        },
        æ—¥å‘å¤: {
          kcal: 41,
          protein: 0.7,
          fat: 0.1,
          carb: 9,
          salt: 0,
          ph: 3.5,
          sugarPct: 9,
        },
        ã‚ªãƒ¬ãƒ³ã‚¸: {
          kcal: 38,
          protein: 0.7,
          fat: 0.2,
          carb: 9.0,
          salt: 0,
          ph: 3.5,
          sugarPct: 9,
        },
        ã‚­ãƒ³ã‚«ãƒ³: {
          kcal: 71,
          protein: 1.9,
          fat: 0.2,
          carb: 14.0,
          salt: 0,
          ph: 3.3,
          sugarPct: 14,
        },
        ã¶ã©ã†: {
          kcal: 58,
          protein: 0.5,
          fat: 0.1,
          carb: 15.7,
          salt: 0,
          ph: 3.5,
          sugarPct: 15,
        },
        ãƒ–ãƒ«ãƒ¼ãƒ™ãƒªãƒ¼: {
          kcal: 49,
          protein: 0.5,
          fat: 0.1,
          carb: 10,
          salt: 0,
          ph: 3.2,
          sugarPct: 10,
        },
        ãƒ¬ãƒ¢ãƒ³: {
          kcal: 29,
          protein: 1.1,
          fat: 0.3,
          carb: 2.5,
          salt: 0,
          ph: 2.5,
          sugarPct: 2,
        },
        æ¢¨: {
          kcal: 43,
          protein: 0.3,
          fat: 0.1,
          carb: 10,
          salt: 0,
          ph: 3.8,
          sugarPct: 10,
        },
        ãƒ©ã‚ºãƒ™ãƒªãƒ¼: {
          kcal: 41,
          protein: 1.2,
          fat: 0.7,
          carb: 5.0,
          salt: 0,
          ph: 3.3,
          sugarPct: 5,
        },
        ã‚ã‚“ãš: {
          kcal: 44,
          protein: 0.8,
          fat: 0.1,
          carb: 8.0,
          salt: 0,
          ph: 3.4,
          sugarPct: 8,
        },
        æ¢…: {
          kcal: 30,
          protein: 0.5,
          fat: 0.1,
          carb: 4.0,
          salt: 0,
          ph: 3.0,
          sugarPct: 4,
        },
        ãƒãƒŠãƒŠ: {
          kcal: 86,
          protein: 1.1,
          fat: 0.3,
          carb: 22.5,
          salt: 0,
          ph: 4.8,
          sugarPct: 12,
        },
        ãƒ«ãƒãƒ¼ãƒ–: {
          kcal: 21,
          protein: 0.9,
          fat: 0.2,
          carb: 2.0,
          salt: 0,
          ph: 3.1,
          sugarPct: 2,
        },
        ã³ã‚: {
          kcal: 45,
          protein: 0.4,
          fat: 0.2,
          carb: 9.0,
          salt: 0,
          ph: 3.7,
          sugarPct: 9,
        },
        ã«ã‚“ã˜ã‚“: {
          kcal: 37,
          protein: 0.7,
          fat: 0.2,
          carb: 6.0,
          salt: 0,
          ph: 5.9,
          sugarPct: 6,
        },
        ã‚†ãš: {
          kcal: 20,
          protein: 0.8,
          fat: 0.1,
          carb: 5.0,
          salt: 0,
          ph: 2.9,
          sugarPct: 5,
        },
      };

      function val(id) {
        return document.getElementById(id)?.value || "";
      }

      function generateRecipe() {
        const main = val("mainIngredient");
        const weightMain = Number(val("mainWeight")) || 0;
        const sub1 = val("subIngredient1");
        const weightSub1 = Number(val("subWeight1")) || 0;
        const sub2 = val("subIngredient2");
        const weightSub2 = Number(val("subWeight2")) || 0;
        const otherSweetener = val("otherSweetener");
        const otherSweetenerWeight = Number(val("otherSweetenerWeight")) || 0;
        const mainSweetener = val("mainSweetener");
        const spice = val("spice");
        const spiceLevel = val("spiceLevel");
        const pectin = val("pectin");
        const flavoring = val("flavoring");
        const acidulant = val("acidulant");
        const acidulantWeight = Number(val("acidulantWeight")) || 0;
        const liquor = val("liquor");
        const liquorWeight = Number(val("liquorWeight")) || 0;
        const jamType = val("jamType");
        const targetBrix = Number(val("targetBrix")) || 65;

        const totalFruitWeight = weightMain + weightSub1 + weightSub2;
        let jamWeight = Math.round(totalFruitWeight * 0.8);
        globalJamWeight = jamWeight;

        const totalSugar = Math.round(jamWeight * (targetBrix / 100));
        let mainSweetenerWeight = totalSugar - otherSweetenerWeight;
        if (mainSweetenerWeight < 0) mainSweetenerWeight = 0;
        globalMainSweetenerWeight = mainSweetenerWeight;

        let phValue =
          ingredientData[main]?.ph !== undefined
            ? ingredientData[main].ph
            : "ä¸æ˜";
        // --- ã“ã“ã¾ã§ãŒæ—¢å­˜ã®ãƒ¬ã‚·ãƒ”ä½œæˆéƒ¨åˆ† ---

        let recipe = `ğŸ“ ã‚¸ãƒ£ãƒ ãƒ¬ã‚·ãƒ”\n`;
        recipe += `ä¸»åŸææ–™ï¼š${main} ${weightMain}gï¼ˆpH: ${phValue}ï¼‰\n`;
        if (sub1) recipe += `å‰¯åŸææ–™1ï¼š${sub1} ${weightSub1}g\n`;
        if (sub2) recipe += `å‰¯åŸææ–™2ï¼š${sub2} ${weightSub2}g\n`;
        if (otherSweetener)
          recipe += `ãã®ä»–ç”˜å‘³æ–™ï¼š${otherSweetener} ${otherSweetenerWeight}g\n`;
        recipe += `ãƒ¡ã‚¤ãƒ³ç”˜å‘³æ–™ï¼ˆæ¨å®šï¼‰ï¼š${mainSweetener} ç´„${mainSweetenerWeight}g\n`;
        if (spice) recipe += `ã‚¹ãƒ‘ã‚¤ã‚¹ï¼š${spice}ï¼ˆ${spiceLevel}ï¼‰\n`;
        if (pectin) recipe += `ãƒšã‚¯ãƒãƒ³ï¼š${pectin}g\n`;
        if (flavoring) recipe += `é¦™æ–™ï¼š${flavoring}\n`;
        if (acidulant) {
          recipe += `é…¸å‘³æ–™ï¼š${acidulant} ${acidulantWeight}g\n`;
        }
        if (liquor) recipe += `æ´‹é…’ï¼š${liquor} ${liquorWeight}g\n`;
        recipe += `ç…®è©°ã‚å¾Œã®å®Œæˆé‡é‡ï¼šç´„${jamWeight}g\n`;
        recipe += `ç›®æ¨™ç³–åº¦ï¼š${targetBrix}%\n`;

        let phSum = 0;
        let weightSum = 0;

        const ingredients = [
          { name: main, weight: weightMain },
          { name: sub1, weight: weightSub1 },
          { name: sub2, weight: weightSub2 },
        ];

        // é…¸å‘³æ–™ã‚’åŠ ãˆã‚‹
        if (acidulant && acidulantWeight > 0) {
          let acidNameForLookup = acidulant;

          // ingredientData ã¨åˆã‚ã›ã‚‹
          if (acidulant.includes("ãƒ¬ãƒ¢ãƒ³")) acidNameForLookup = "ãƒ¬ãƒ¢ãƒ³";
          if (acidulant.includes("ãƒ©ã‚¤ãƒ ")) acidNameForLookup = "ãƒ©ã‚¤ãƒ ";
          if (acidulant.includes("ã‚°ãƒ¬ãƒ¼ãƒ—ãƒ•ãƒ«ãƒ¼ãƒ„"))
            acidNameForLookup = "ã‚°ãƒ¬ãƒ¼ãƒ—ãƒ•ãƒ«ãƒ¼ãƒ„";

          ingredients.push({
            name: acidNameForLookup,
            weight: acidulantWeight,
          });
        }

        for (const ing of ingredients) {
          if (ing.name && ing.weight > 0) {
            const data = ingredientData[ing.name];
            let ph = null;

            if (data && data.ph) {
              ph = data.ph;
            } else {
              // ingredientData ã«ãªã„å ´åˆ
              if (ing.name.includes("ã‚¯ã‚¨ãƒ³é…¸")) ph = 2.2;
              else if (ing.name.includes("ãƒªãƒ³ã‚´é…¸")) ph = 3.2;
            }

            if (ph) {
              phSum += ph * ing.weight;
              weightSum += ing.weight;
            }
          }
        }

        let jamPhText = "ä¸æ˜";
        if (weightSum > 0) {
          jamPhText = (phSum / weightSum).toFixed(2);
        }

        recipe += `å®Œæˆã‚¸ãƒ£ãƒ ã®æ¨å®špHï¼š${jamPhText}\n`;

        document.getElementById("recipeOutput").innerText = recipe;
      }

      function generateLabel() {
        // ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
        function getIngredientDataKey(name) {
          return name.replace(/ï¼ˆ.*?ï¼‰/, "");
        }

        const main = val("mainIngredient");
        const origin = val("origin") || "å›½ç”£";
        const weightMain = Number(val("mainWeight")) || 0;
        const sub1 = val("subIngredient1");
        const weightSub1 = Number(val("subWeight1")) || 0;
        const sub2 = val("subIngredient2");
        const weightSub2 = Number(val("subWeight2")) || 0;
        const butterType = val("butterType");
        const butterLabel = butterType ? butterType + "ãƒã‚¿ãƒ¼" : "ãƒã‚¿ãƒ¼";
        const mainSweetener = val("mainSweetener");
        const otherSweetener = val("otherSweetener");
        const otherSweetenerWeight = Number(val("otherSweetenerWeight")) || 0;
        const spice = val("spice");
        const liquor = val("liquor");
        const liquorWeight = Number(val("liquorWeight")) || 0;
        const pectin = val("pectin");
        const flavoring = val("flavoring");
        const acidulant = val("acidulant");
        const acidulantWeight = Number(val("acidulantWeight")) || 0;
        const jamType = val("jamType");
        const displayAmount = Number(val("displayAmount")) || 100;

        // ãƒã‚¿ãƒ¼åå‡¦ç†
        const sub1ActualName =
          sub1 === "ãƒã‚¿ãƒ¼" && butterType ? butterLabel : sub1;
        const sub2ActualName =
          sub2 === "ãƒã‚¿ãƒ¼" && butterType ? butterLabel : sub2;

        // åŸææ–™é…åˆ—
        const ingredientsArray = [];
        if (main)
          ingredientsArray.push({
            name: `${main}ï¼ˆ${origin}ï¼‰`,
            weight: weightMain,
          });
        if (mainSweetener)
          ingredientsArray.push({
            name: mainSweetener,
            weight: globalMainSweetenerWeight,
          });
        if (sub1)
          ingredientsArray.push({ name: sub1ActualName, weight: weightSub1 });
        if (sub2)
          ingredientsArray.push({ name: sub2ActualName, weight: weightSub2 });
        if (otherSweetener)
          ingredientsArray.push({
            name: otherSweetener,
            weight: otherSweetenerWeight,
          });

        const acidLower = (acidulant || "").toLowerCase();
        if (acidulant) {
          if (/ãƒ¬ãƒ¢ãƒ³|ãƒ©ã‚¤ãƒ |ã‚°ãƒ¬ãƒ¼ãƒ—ãƒ•ãƒ«ãƒ¼ãƒ„/.test(acidLower)) {
            ingredientsArray.push({ name: acidulant, weight: acidulantWeight });
          } else if (/ã‚¯ã‚¨ãƒ³é…¸|ãƒªãƒ³ã‚´é…¸/.test(acidLower)) {
            // æ·»åŠ ç‰©æ‰±ã„
          } else {
            ingredientsArray.push({ name: acidulant, weight: acidulantWeight });
          }
        }
        if (liquor)
          ingredientsArray.push({ name: liquor, weight: liquorWeight });
        if (spice) ingredientsArray.push({ name: spice, weight: 0 });

        ingredientsArray.forEach(
          (item) => (item.weight = Number(item.weight) || 0)
        );
        ingredientsArray.sort((a, b) => b.weight - a.weight);

        // åŸææ–™åè¡¨ç¤ºï¼ˆãƒã‚¿ãƒ¼è¡¨è¨˜çµ±ä¸€ï¼‰
        const ingredientsStr = ingredientsArray
          .map((item) =>
            /^(æœ‰å¡©|ç„¡å¡©)?ãƒã‚¿ãƒ¼/.test(item.name)
              ? "ãƒã‚¿ãƒ¼ï¼ˆä¹³æˆåˆ†ã‚’å«ã‚€ï¼‰"
              : item.name
          )
          .join("ã€");

        // æ·»åŠ ç‰©
        const additives = [];
        if (pectin) additives.push("ãƒšã‚¯ãƒãƒ³");
        if (flavoring) additives.push("é¦™æ–™");
        const fullLabel = additives.length
          ? `${ingredientsStr} / ${additives.join("ã€")}`
          : ingredientsStr;

        // æ „é¤Šæˆåˆ†è¨ˆç®—
        const allIngredients = [
          { name: main, weight: weightMain },
          { name: sub1ActualName, weight: weightSub1 },
          { name: sub2ActualName, weight: weightSub2 },
          { name: mainSweetener, weight: globalMainSweetenerWeight },
          { name: otherSweetener, weight: otherSweetenerWeight },
          { name: acidulant, weight: acidulantWeight },
          { name: liquor, weight: liquorWeight },
        ];
        let total = { kcal: 0, protein: 0, fat: 0, carb: 0, salt: 0 };
        let totalWeight = 0;
        allIngredients.forEach((ing) => {
          if (!ing.name || ing.weight === 0) return;
          const data = ingredientData[getIngredientDataKey(ing.name)];
          if (data) {
            total.kcal += (data.kcal * ing.weight) / 100;
            total.protein += (data.protein * ing.weight) / 100;
            total.fat += (data.fat * ing.weight) / 100;
            total.carb += (data.carb * ing.weight) / 100;
            total.salt += (data.salt * ing.weight) / 100;
            totalWeight += ing.weight;
          }
        });
        const per100g = {
          kcal: totalWeight
            ? ((total.kcal * 100) / totalWeight).toFixed(1)
            : "0.0",
          protein: totalWeight
            ? ((total.protein * 100) / totalWeight).toFixed(1)
            : "0.0",
          fat: totalWeight
            ? ((total.fat * 100) / totalWeight).toFixed(1)
            : "0.0",
          carb: totalWeight
            ? ((total.carb * 100) / totalWeight).toFixed(1)
            : "0.0",
          salt: totalWeight
            ? ((total.salt * 100) / totalWeight).toFixed(2)
            : "0.00",
        };

        // ã‚¢ãƒ¬ãƒ«ã‚²ãƒ³ãƒã‚§ãƒƒã‚¯
        const found = [];
        ingredientsArray.forEach((item) => {
          const nm = item.name;
          allergens.forEach((a) => {
            if (
              nm.includes(a) ||
              (a === "è½èŠ±ç”Ÿ" && nm.includes("ãƒ”ãƒ¼ãƒŠãƒƒãƒ„"))
            ) {
              if (!found.includes(a)) found.push(a);
            }
          });
        });

        // ãƒ©ãƒ™ãƒ«ä½œæˆ
        const storageText = jamType.includes("é«˜ç³–åº¦")
          ? "ç›´å°„æ—¥å…‰é«˜æ¸©å¤šæ¹¿ã‚’é¿ã‘å¸¸æ¸©ä¿å­˜ã€‚é–‹å°å¾Œã¯è¦å†·è”µ10â„ƒä»¥ä¸‹ã€‚"
          : "è¦å†·è”µï¼ˆ10â„ƒä»¥ä¸‹ï¼‰ã€‚é–‹å°å¾Œã¯ãŠæ—©ã‚ã«ãŠå¬ã—ä¸ŠãŒã‚Šãã ã•ã„ã€‚";

        let label = `<h3>ğŸ“ ä¸€æ‹¬è¡¨ç¤ºãƒ©ãƒ™ãƒ«</h3>`;
        label += `<p>åç§°ï¼š${main}ã‚¸ãƒ£ãƒ </p>`;
        label += `<p>åŸææ–™åï¼š${fullLabel}</p>`;
        label += `<p>å†…å®¹é‡ï¼š${displayAmount}g</p>`;
        label += `<p>ä¿å­˜æ–¹æ³•ï¼š${storageText}</p>`;
        label += `<p>è£½é€ è€…ï¼šå„è‡ªè¨˜å…¥</p>`;
        label += `<p>æ „é¤Šæˆåˆ†ï¼ˆ${displayAmount}gå½“ãŸã‚Š æ¨å®šå€¤ï¼‰ï¼š</p>`;
        label += `<p>ã‚¨ãƒãƒ«ã‚®ãƒ¼ï¼š${per100g.kcal} kcal</p>`;
        label += `<p>ãŸã‚“ã±ãè³ªï¼š${per100g.protein} g</p>`;
        label += `<p>è„‚è³ªï¼š${per100g.fat} g</p>`;
        label += `<p>ç‚­æ°´åŒ–ç‰©ï¼š${per100g.carb} g</p>`;
        label += `<p>é£Ÿå¡©ç›¸å½“é‡ï¼š${per100g.salt} g</p>`;
        label += `<p><strong>ã€ˆæ¨å®šå€¤ã€‰</strong></p>`;
        if (fullLabel.includes("ã¯ã¡ã¿ã¤"))
          label += `<p style="color:red;">â€»ã¯ã¡ã¿ã¤ã¯ã€1æ­³æœªæº€ã®ä¹³å…ã«ã¯ä¸ãˆãªã„ã§ãã ã•ã„ã€‚</p>`;
        if (fullLabel.includes("ãƒã‚¿ãƒ¼"))
          label += `<p style="color:red;">â€»æœ¬å“ã«ã¯ä¹³æˆåˆ†ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚</p>`;
        if (fullLabel.includes("ã‚¯ãƒ«ãƒŸ"))
          label += `<p style="color:red;">â€»æœ¬å“ã«ã¯ã‚¯ãƒ«ãƒŸãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚</p>`;
        if (found.length)
          label += `<p style="color:red;"><strong>ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼è¡¨ç¤ºï¼ˆ28å“ç›®ï¼‰ï¼š</strong>${found.join(
            "ã€"
          )} ã‚’å«ã¿ã¾ã™ã€‚</p>`;
        label += `<hr><p style="color:#5a4033; font-size:0.9em;">;

  
           ğŸ“åŸææ–™ã¨å¸Œæœ›ç³–åº¦ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€å¿…è¦ãªç ‚ç³–ã®é‡ã®ç›®å®‰ã‚„ãƒ¬ã‚·ãƒ”ãŒè‡ªå‹•ã§ç®—å‡ºã•ã‚Œã€ä¸€æ‹¬è¡¨ç¤ºã‚‚ä½œæˆã§ãã‚‹ä¾¿åˆ©ãªãƒ„ãƒ¼ãƒ«ã§ã™ã€‚<br>
           ğŸ“æœ¬ã‚¢ãƒ—ãƒªã‚’åˆ©ç”¨ã—ãŸéš›ã«ç”Ÿã˜ãŸãƒˆãƒ©ãƒ–ãƒ«ã‚„äº‹æ•…ã«ã¤ã„ã¦ã€è£½ä½œè€…ã¯ä¸€åˆ‡ã®è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚<br>
           ğŸ“è²©å£²ã‚’äºˆå®šã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ã€å¿…ãšä¿å¥æ‰€ã‚„é–¢ä¿‚æ©Ÿé–¢ã«ç›¸è«‡ã—ã€æ³•ä»¤ã«åŸºã¥ãè¡¨ç¤ºã‚’è¡Œã£ã¦ãã ã•ã„ã€‚</p>`;

        document.getElementById("labelOutput").innerHTML = label;
      }

      function toggleGuide() {
        const g = document.getElementById("guide");
        g.style.display = g.style.display === "none" ? "block" : "none";
        if (g.innerText === "") {
          g.innerText = `ğŸ½ ä¸‹ã”ã—ã‚‰ãˆãƒ»èª¿ç†ã®ãƒ’ãƒ³ãƒˆï¼š
                 - é‹ã¯ã‚¹ãƒ†ãƒ³ãƒ¬ã‚¹ãŒãŠã™ã™ã‚ã€‚ãƒ›ãƒ¼ãƒ­ãƒ¼ã¯æ¬ ã‘ãŒãªã„ã‚‚ã®ã‚’ã€‚
                 - ç´ æã®ç†Ÿã—å…·åˆã«ã‚ˆã£ã¦ä¸‹ã”ã—ã‚‰ãˆã‚’å·¥å¤«ã—ã¦ãã ã•ã„ã€‚
                 - ã‚­ã‚¦ã‚¤ï¼šåŠåˆ†ã«åˆ‡ã£ã¦ã‚¹ãƒ—ãƒ¼ãƒ³ã§ä¸­èº«ã‚’ãã‚ŠæŠœã
                 - ã„ã¡ã”ï¼šç ‚ç³–ã‚’ã¾ã¶ã—æ°´åˆ†ã‚’å‡ºã—ã¦ã‹ã‚‰ç…®è¾¼ã‚€ã¨è‰¯ã„ã€‚æ€¥ãå ´åˆã¯ã‚«ãƒƒãƒˆã¾ãŸã¯æ½°ã—ã¦ç ‚ç³–ã¨ã¾ã¶ã™ã€‚
                 - ãƒŠã‚¹ï¼šçš®ã‚’ã‚€ã„ã¦ã‚¢ã‚¯æŠœãã€‚çš®ã‚’ç…®å‡ºã—ãŸç´«æ°´ã§è‰²ã‚’å‡ºã—ã€ã‚Šã‚“ã”ã¨ç…®ã‚‹ã€‚ãƒ¬ãƒ¢ãƒ³ã§è‰²è‰¯ãã€‚
                 - ãƒ¬ãƒ¢ãƒ³æœæ±ã‚„ã‚¹ãƒ‘ã‚¤ã‚¹ã¯å¾ŒåŠã«åŠ ãˆã‚‹ã¨é¦™ã‚ŠãŒæ®‹ã‚Šã¾ã™ã€‚
                 - ã¯ã¡ã¿ã¤ã‚’ä½¿ç”¨ã—ãŸå ´åˆã¯ã€1æ­³æœªæº€ã®ä¹³å¹¼å…ã«ã¯é£Ÿã¹ã•ã›ãªã„ã§ãã ã•ã„ã€‚
                 ğŸ«™ åŠ ç†±æ®ºèŒã«ã¤ã„ã¦ï¼š
                 - é«˜ç³–åº¦ï¼ˆç³–åº¦65%ä»¥ä¸Šï¼‰ã®ã‚¸ãƒ£ãƒ ã¯ç“¶è©°å¾Œã«ç…®æ²¸åŠ ç†±æ®ºèŒå¯èƒ½ã€‚
                 - ã‚¸ãƒ£ãƒ ã®ä¸­å¿ƒæ¸©åº¦ãŒ85â„ƒã§30åˆ†åŠ ç†±ã§é•·æœŸä¿å­˜ãŒå¯èƒ½ã€‚
                 - åŠ ç†±ã¯ç“¶è©°å¾Œã€é‹ã§ç…®ã¦åŠ ç†±ã—ã¾ã™ã€‚
                 - è‡ªç„¶å†·å´å¾Œã€è“‹ã®çœŸã‚“ä¸­ãŒã¸ã“ã‚“ã§ã„ã‚Œã°å¯†å°çŠ¶æ…‹ã§ã™ã€‚ï¼ˆè²©å£²ã‚’ã™ã‚‹å ´åˆã¯ç´°èŒæ¤œæŸ»ã‚’å—ã‘ã¾ã—ã‚‡ã†ï¼‰`;
        }
      }

      function printRecipeOnly() {
        const c = document.getElementById("recipeOutput").outerHTML;
        const w = window.open();
        w.document.write(c);
        w.print();
        w.close();
      }

      function printLabelOnly() {
        const l = document.getElementById("labelOutput").outerHTML;
        const w = window.open();
        w.document.write(l);
        w.print();
        w.close();
      }

      function handleEnter(event, nextId) {
        if (event.key === "Enter") {
          event.preventDefault();
          const next = document.getElementById(nextId);
          if (next) next.focus();
        }
      }
    </script>
  </body>
</html>


</section>

<footer>
  <p>Â© 2025 è¾²ç”£å·¥æˆ¿ã‚„ã—ã‚ â€” æœ¬ã‚¢ãƒ—ãƒªã¯å€‹äººåˆ©ç”¨é™å®šãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ã‚‚ã¨ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
</footer>

</body>
</html>
